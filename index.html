# Fixed index.html for CHIP Demo Application

Save this file as **index.html** (rename the file after download) and open it in any modern browser. It resolves the non-responsive â€œStart Climate Analysisâ€ button and adds clear confirmation after a drawing is uploaded.

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CHIP â€“ Critical Health Infrastructure Protection</title>

    <!-- Load THREE.js FIRST so it is available to the 3-D code -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.150.1/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        /* ---------- Base styles ---------- */
        * {box-sizing:border-box;margin:0;padding:0;}
        body{font-family:"Segoe UI",Arial,Helvetica,sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#333;line-height:1.6;}
        .container{max-width:1200px;margin:0 auto;padding:20px;}
        .header,.upload-section,.results-section,.recommendations{background:#fff;border-radius:15px;box-shadow:0 10px 30px rgba(0,0,0,.1);padding:2rem;margin-bottom:2rem;}
        .header h1{font-size:2.5em;color:#2c3e50;margin-bottom:.5rem;}
        .header p{font-size:1.2em;color:#7f8c8d;}

        /* ---------- Upload area ---------- */
        .upload-area{border:3px dashed #3498db;border-radius:10px;padding:2rem;text-align:center;cursor:pointer;transition:.3s;}
        .upload-area:hover{background:#f8f9fa;border-color:#2980b9;}
        .btn{background:linear-gradient(45deg,#3498db,#2980b9);color:#fff;padding:12px 24px;border:none;border-radius:25px;font-size:1em;cursor:pointer;transition:.3s;margin-top:15px;}
        .btn:disabled{opacity:.5;cursor:not-allowed;}
        .btn:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 5px 15px rgba(0,0,0,.2);}        

        /* ---------- Results ---------- */
        .results-grid{display:grid;grid-template-columns:1fr 1fr;gap:2rem;margin-top:2rem;}
        .chart-container{background:#f8f9fa;padding:1.5rem;border-radius:10px;height:300px;}
        .viewer-3d{background:#f8f9fa;border-radius:10px;height:400px;margin-top:2rem;position:relative;overflow:hidden;}
        @media(max-width:768px){.results-grid{grid-template-columns:1fr;}}

        /* ---------- Loading ---------- */
        .loading{text-align:center;padding:2rem;display:none;}
        .spinner{border:4px solid #f3f3f3;border-top:4px solid #3498db;border-radius:50%;width:40px;height:40px;animation:spin 1s linear infinite;margin:0 auto;}
        @keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}

        /* ---------- Recommendation cards ---------- */
        .recommendation-card{background:#f8f9fa;padding:1.5rem;border-radius:10px;margin-bottom:1rem;border-left:4px solid #3498db;}
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸ¥ CHIP Demo</h1>
            <p>Critical Health Infrastructure Protection â€“ Climate Resilience Assessment</p>
        </div>

        <!-- ================= Upload Section ================= -->
        <div class="upload-section">
            <h2>Upload Building Details</h2>
            <div id="uploadArea" class="upload-area">
                <input type="file" id="fileInput" accept=".pdf,.dwg,.png,.jpg,.jpeg" style="display:none;">
                <p id="uploadPrompt">ðŸ“ Click to upload building drawings (PDF, DWG, Images)</p>
                <p style="color:#7f8c8d;font-size:.9em;">Supported formats: PDF, DWG, PNG, JPG</p>
                <p id="uploadStatus" style="display:none;color:green;margin-top:8px;"></p>
            </div>

            <div style="margin-top:1rem;">
                <label for="coordinates">Location Coordinates:</label>
                <input type="text" id="coordinates" placeholder="28.6139, 77.2090 (Delhi)" style="width:100%;padding:10px;margin-top:5px;border:1px solid #ddd;border-radius:5px;">
            </div>

            <!-- Start button disabled until a file is selected -->
            <button id="startBtn" class="btn" disabled>ðŸš€ Start Climate Analysis</button>
        </div>

        <!-- ================= Results Section ================= -->
        <div id="results" class="results-section" style="display:none;">
            <h2>Climate Resilience Analysis Results</h2>
            <div class="results-grid">
                <div class="chart-container"><canvas id="energyChart"></canvas></div>
                <div class="chart-container"><canvas id="comfortChart"></canvas></div>
            </div>
            <div id="viewer3d" class="viewer-3d"></div>
        </div>

        <!-- ================= Recommendations ================= -->
        <div id="recommendations" class="recommendations" style="display:none;">
            <h2>Climate Adaptation Recommendations</h2>
            <div id="recommendationsList"></div>
        </div>

        <!-- ================= Loading Spinner ================= -->
        <div id="loading" class="loading">
            <div class="spinner"></div>
            <p>Analyzing building performance and climate dataâ€¦</p>
        </div>
    </div>

    <!-- ================= Application Logic ================= -->
    <script>
    (function(){
        "use strict";

        /* ----- Cached DOM references ----- */
        const fileInput       = document.getElementById("fileInput");
        const uploadArea      = document.getElementById("uploadArea");
        const uploadPrompt    = document.getElementById("uploadPrompt");
        const uploadStatus    = document.getElementById("uploadStatus");
        const startBtn        = document.getElementById("startBtn");
        const loadingDiv      = document.getElementById("loading");
        const resultsSection  = document.getElementById("results");
        const recSection      = document.getElementById("recommendations");
        const viewer3d        = document.getElementById("viewer3d");

        let uploadedFile = null;
        let scene, camera, renderer;

        /* ----- Event wiring after DOM ready ----- */
        document.addEventListener("DOMContentLoaded", ()=>{
            // Click anywhere on upload box triggers hidden file picker
            uploadArea.addEventListener("click", () => fileInput.click());
            fileInput.addEventListener("change", handleFileUpload);
            startBtn.addEventListener("click", startAnalysis);
        });

        /* ----- Handle drawing upload ----- */
        function handleFileUpload(e){
            uploadedFile = e.target.files[0] || null;
            if(uploadedFile){
                uploadPrompt.style.display = "none";
                uploadStatus.textContent = `âœ… ${uploadedFile.name} uploaded successfully`;
                uploadStatus.style.display = "block";
                startBtn.disabled = false; // enable start button only after file chosen
            }
        }

        /* ----- Start analysis (simulated for demo) ----- */
        function startAnalysis(){
            if(!uploadedFile){
                alert("Please upload a building drawing first");
                return;
            }
            startBtn.disabled = true; // prevent double-clicks
            loadingDiv.style.display = "block";

            /* Simulate async work */
            setTimeout(() => {
                loadingDiv.style.display = "none";
                showCharts();
                create3DView();
                showRecommendations();
            }, 2000);
        }

        /* ----- Charts ----- */
        function showCharts(){
            resultsSection.style.display = "block";

            /* Energy use */
            new Chart(document.getElementById("energyChart"), {
                type:"bar",
                data:{labels:["Current","With Retrofit"],datasets:[{label:"Energy (kWh/yr)",data:[45000,27000],backgroundColor:["#e74c3c","#27ae60"]}]},
                options:{maintainAspectRatio:false,plugins:{title:{display:true,text:"Energy Consumption"}}}
            });

            /* Comfort plot */
            new Chart(document.getElementById("comfortChart"), {
                type:"line",
                data:{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Current (%)",data:[65,70,60,45,35,30,32,35,50,68,75,70],borderColor:"#e74c3c",tension:.4},{label:"With Retrofit (%)",data:[78,82,85,80,75,70,72,75,82,85,88,85],borderColor:"#27ae60",tension:.4}]},
                options:{maintainAspectRatio:false,plugins:{title:{display:true,text:"Thermal Comfort"}}}
            });
        }

        /* ----- 3-D viewer ----- */
        function create3DView(){
            viewer3d.innerHTML = ""; // clear previous
            if(typeof THREE === "undefined"){viewer3d.innerHTML = "<p style='padding:150px 0;text-align:center;color:red'>âŒ THREE.js failed to load</p>";return;}

            const width  = viewer3d.clientWidth;
            const height = viewer3d.clientHeight;

            scene = new THREE.Scene();
            scene.background = new THREE.Color(0xf0f0f0);
            camera = new THREE.PerspectiveCamera(60, width/height, 0.1, 1000);
            camera.position.set(10,10,10);
            renderer = new THREE.WebGLRenderer({antialias:true});
            renderer.setSize(width,height);
            viewer3d.appendChild(renderer.domElement);

            /* Lighting */
            scene.add(new THREE.AmbientLight(0xffffff,.6));
            const dir = new THREE.DirectionalLight(0xffffff,.8);
            dir.position.set(10,10,5); scene.add(dir);

            /* Simple building */
            const building = new THREE.Mesh(new THREE.BoxGeometry(8,4,6), new THREE.MeshLambertMaterial({color:0x8ecae6}));
            building.position.y=2; scene.add(building);
            const roof = new THREE.Mesh(new THREE.ConeGeometry(6,2,4), new THREE.MeshLambertMaterial({color:0x023047}));
            roof.position.y=5; roof.rotation.y=Math.PI/4; scene.add(roof);
            const ground = new THREE.Mesh(new THREE.PlaneGeometry(20,20), new THREE.MeshLambertMaterial({color:0x90c695}));
            ground.rotation.x=-Math.PI/2; scene.add(ground);

            /* Orbit-like control with mouse */
            let isDown=false,prev={x:0,y:0};
            viewer3d.addEventListener("mousedown",ev=>{isDown=true;prev.x=ev.clientX;prev.y=ev.clientY;});
            viewer3d.addEventListener("mouseup",()=>isDown=false);
            viewer3d.addEventListener("mousemove",ev=>{
                if(!isDown)return;
                const dx=(ev.clientX-prev.x)*0.01;
                camera.position.applyAxisAngle(new THREE.Vector3(0,1,0),-dx);
                camera.lookAt(0,0,0);
                prev.x=ev.clientX;prev.y=ev.clientY;
            });

            window.addEventListener("resize",()=>{
                const w=viewer3d.clientWidth,h=viewer3d.clientHeight;
                camera.aspect=w/h;camera.updateProjectionMatrix();renderer.setSize(w,h);
            });

            (function animate(){requestAnimationFrame(animate);renderer.render(scene,camera);})();
        }

        /* ----- Recommendations list ----- */
        function showRecommendations(){
            recSection.style.display = "block";
            const list=[
                {title:"ðŸŒ¿ Green Roof Installation",desc:"Install vegetation on roof surfaces to reduce heat absorption and improve insulation.",impact:"20â€“30% cooling-energy cut",cost:"â‚¹500â€“800/mÂ²",priority:"High"},
                {title:"ðŸ¢ External Shading",desc:"Add movable shades to east/west windows.",impact:"15â€“25% solar heat-gain cut",cost:"â‚¹300â€“500 per window",priority:"High"},
                {title:"ðŸŒ€ Natural Ventilation",desc:"Optimize window placement and add ventilation towers.",impact:"30â€“40% mechanical cooling drop",cost:"â‚¹200â€“400/mÂ²",priority:"Medium"},
                {title:"ðŸ”‹ Solar PV",desc:"Install rooftop solar panels.",impact:"50â€“70% electricity saving",cost:"â‚¹40kâ€“60k per kW",priority:"Medium"}
            ];
            document.getElementById("recommendationsList").innerHTML = list.map(r=>`<div class='recommendation-card'><h3>${r.title}</h3><p>${r.desc}</p><p style='margin-top:8px;'><strong>Impact:</strong> ${r.impact} | <strong>Cost:</strong> ${r.cost} | <strong>Priority:</strong> ${r.priority}</p></div>`).join("");
        }
    })();
    </script>
</body>
</html>
```

---

### How to use
1. Download this file (it is named **index-html.md**).  
2. Rename it to **index.html**.  
3. Double-click the file or drag it into Chrome/Edge/Firefox.  
4. Upload a drawing â†’ see green confirmation tick.  
5. â€œStart Climate Analysisâ€ becomes enabled; click it to run charts and the 3-D view.

Everything should now work as expected, with the upload confirmation and functional start button.
