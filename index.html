<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>CHIP – Enhanced Demo (Fixed Tabs)</title>

<!-- CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

<!-- THREE.js & Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/three@0.150.1/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

<style>
  body{background:#f5f7fa}
  nav a.nav-link{font-weight:600;cursor:pointer}
  section{display:none;padding:2rem 0}
  section.active{display:block}
  #viewer3d{height:450px;background:#eef1f5;border-radius:8px;position:relative;overflow:hidden}
  .upload-box{border:2px dashed #0d6efd;border-radius:8px;padding:2rem;text-align:center;cursor:pointer}
  .upload-box:hover{background:#f0f8ff}
  /* …(rest of your existing styles stay here)… */
</style>
</head>

<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
  <div class="container-fluid">
    <a class="navbar-brand fw-bold" href="#">CHIP Demo</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navTabs">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navTabs">
      <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
        <li class="nav-item"><a class="nav-link active" data-page="home" href="#">Home</a></li>
        <li class="nav-item"><a class="nav-link" data-page="upload" href="#">Upload</a></li>
        <li class="nav-item"><a class="nav-link" data-page="simulation" href="#">Simulation</a></li>
        <li class="nav-item"><a class="nav-link" data-page="view3d" href="#">3-D&nbsp;View</a></li>
        <li class="nav-item"><a class="nav-link" data-page="retrofit" href="#">Retrofit</a></li>
        <li class="nav-item"><a class="nav-link" data-page="results" href="#">Results</a></li>
        <li class="nav-item"><a class="nav-link" data-page="architecture" href="#">Architecture</a></li>
      </ul>
    </div>
  </div>
</nav>

<div class="container py-4">
  <!-- HOME -->
  <section id="home" class="active">
    <h2>Welcome to CHIP Enhanced</h2>
    <p>Start by uploading your building drawings and location data.</p>
  </section>

  <!-- UPLOAD -->
  <section id="upload">
    <h2>Upload Building Data</h2>
    <!-- …(existing upload markup)… -->
  </section>

  <!-- SIMULATION -->
  <section id="simulation">
    <h2>Simulation in Progress</h2>
    <!-- …(existing simulation markup)… -->
  </section>

  <!-- 3-D VIEW -->
  <section id="view3d">
    <h2>Interactive 3-D View</h2>
    <div id="viewer3d" class="d-flex justify-content-center align-items-center">
      <span class="text-muted">3-D model loading…</span>
    </div>
  </section>

  <!-- RETROFIT -->
  <section id="retrofit">
    <h2>Select Retrofits</h2>
    <!-- …(existing retrofit markup)… -->
  </section>

  <!-- RESULTS -->
  <section id="results">
    <h2>Results</h2>
    <!-- …(existing results markup)… -->
  </section>

  <!-- ARCHITECTURE -->
  <section id="architecture">
    <h2>How CHIP Works</h2>
    <!-- …(existing architecture content)… -->
  </section>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
/* ---------- SIMPLE TAB ROUTER (works on first click & after boostrap collapse) ---------- */
function switchTab(targetId){
  // highlight nav link
  document.querySelectorAll('nav a.nav-link').forEach(l=>{
    l.classList.toggle('active', l.dataset.page===targetId);
  });
  // show section
  document.querySelectorAll('section').forEach(sec=>{
    sec.classList.toggle('active', sec.id===targetId);
  });
}

// delegate clicks from navbar (works even after responsive collapse)
document.addEventListener('click',e=>{
  const link=e.target.closest('a.nav-link[data-page]');
  if(!link) return;
  e.preventDefault();
  switchTab(link.dataset.page);
});

/* ---------- KEEP OTHER EXISTING JS HERE (upload handling, 3-D, charts, etc.) ---------- */
// …(paste the rest of your previous JavaScript functions exactly as before)…
</script>
</body>
</html>
